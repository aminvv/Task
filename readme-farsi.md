# سامانه مدیریت تسک

یک سامانه ساده و سبک برای مدیریت تسک‌ها که با استفاده از NestJS، TypeORM و MySQL ساخته شده است. این پروژه شامل قابلیت‌هایی برای ثبت‌نام و ورود کاربران، مدیریت کاربران، مدیریت پروفایل و مدیریت تسک‌ها است که برای استفاده فردی با کنترل دسترسی مبتنی بر نقش (ادمین و کاربر عادی) طراحی شده است.

## قابلیت‌ها

### احراز هویت
- **ثبت‌نام**: کاربران می‌توانند با ایمیل، شماره تلفن، نام کاربری و رمز عبور ثبت‌نام کنند (رمز عبور حداقل ۸ کاراکتر با حروف بزرگ و کوچک).  
- **ورود**: کاربران می‌توانند با نام کاربری و رمز عبور وارد شوند.  
- **محدودیت یکتایی**: امکان ثبت‌نام با نام کاربری، ایمیل یا شماره تلفن تکراری وجود ندارد.  
- **دسترسی مبتنی بر نقش**: کاربران تازه ثبت‌نام‌شده به‌صورت پیش‌فرض نقش "کاربر عادی" دارند.

### مدیریت کاربران (فقط ادمین)
- دریافت لیست همه کاربران.  
- به‌روزرسانی اطلاعات هر کاربر.  
- حذف یک کاربر (همراه با تسک‌هایش).  
- تخصیص نقش (ادمین یا کاربر عادی) به کاربران ثبت‌شده.

### پروفایل کاربر
- کاربران می‌توانند اطلاعات شخصی خود (به‌جز نام کاربری) را تغییر دهند.  
- کاربران می‌توانند تصویر پروفایل خود را بارگذاری کنند.  
- حذف پروفایل توسط کاربر امکان‌پذیر نیست.

### مدیریت تسک‌ها
- **عملیات CRUD**: ثبت، خواندن، ویرایش و حذف تسک‌ها.  
- **جزئیات تسک**:  
  - نام تسک  
  - توضیحات  
  - پیوست (فایل)  
- کاربران عادی فقط می‌توانند تسک‌های خود را مدیریت کنند.

## تکنولوژی‌ها
- **فریم‌ورک**: NestJS  
- **دیتابیس**: MySQL با TypeORM  
- **احراز هویت**: JWT (توکن‌های دسترسی و تازه‌سازی)  
- **اعتبارسنجی**: Class-validator و Class-transformer  
- **بارگذاری فایل**: Multer  
- **مستندات API**: Swagger  
- **هش رمز عبور**: Bcrypt

## پیش‌نیازها
- **Node.js**: نسخه ۱۸ یا بالاتر  
- **MySQL**: نسخه ۸ یا بالاتر  
- **npm**: نسخه ۹ یا بالاتر

## نصب

1. **دریافت پروژه**:  
   ```bash
   git clone https://github.com/aminvv/Task.git
   cd Task
   ```

2. **نصب وابستگی‌ها**:  
   ```bash
   npm install
   ```

3. **تنظیم متغیرهای محیطی**:  
   یک فایل `.env` در پوشه اصلی ایجاد کنید و مقادیر زیر را وارد کنید:  
   ```
   # دیتابیس
   DB_PORT=3306
   DB_HOST=localhost
   DB_NAME=task_manager
   DB_PASSWORD=@Amin&1378
   DB_USERNAME=root

   # سرور
   PORT=3000

   # توکن
   ACCESS_TOKEN_SECRET=fdgjkkgfdjskgjlksdf5dszfg4dsdfg54dfggh5dfsfgdadsf
   REFRESH_TOKEN_SECRET=fdgjkkdfglkdfsgldfogfdiogikdfsgjidjgifdsgdfgsoi
   ACCESS_TOKEN_EXPIRES_IN=2h
   REFRESH_TOKEN_EXPIRES_IN=7d
   ```  
   مقادیر (مثل رمز دیتابیس) را بر اساس تنظیمات خود تغییر دهید.

4. **راه‌اندازی دیتابیس**:  
   - مطمئن شوید MySQL فعال است.  
   - یک دیتابیس با نام `task_manager` بسازید:  
     ```sql
     CREATE DATABASE task_manager;
     ```  
   - TypeORM به‌صورت خودکار شِما را همگام‌سازی می‌کند.

5. **اجرای برنامه**:  
   ```bash
   npm run start:dev
   ```  
   سرور در آدرس `http://localhost:3000` اجرا می‌شود.

## مستندات API
پس از اجرای سرور، به آدرس `http://localhost:3000/api` بروید تا از طریق Swagger UI به مستندات تعاملی API دسترسی پیدا کنید.

## ساختار پروژه
```
src/
├── auth/              # ماژول احراز هویت  
├── users/             # ماژول مدیریت کاربران  
├── profile/           # ماژول مدیریت پروفایل  
├── tasks/             # ماژول مدیریت تسک‌ها  
├── module/            # ماژول‌های اضافی و کمکی  
├── common/            # ابزارها و دکوراتورهای مشترک  
├── app.module.ts      # ماژول اصلی  
└── main.ts            # نقطه ورود  
```

## اسکریپت‌ها
- **اجرا در حالت توسعه**: `npm run start:dev`  
- **ساخت پروژه**: `npm run build`  
- **اجرا در حالت تولید**: `npm run start:prod`  
- **اجرای تست‌ها**: `npm run test`  
- **بررسی کد**: `npm run lint`  
- **فرمت کد**: `npm run format`

## وابستگی‌ها

### تولید
- `@nestjs/*`: بسته‌های اصلی NestJS  
- `typeorm`, `mysql2`: ادغام دیتابیس  
- `bcrypt`: هش رمز عبور  
- `passport`, `passport-jwt`: احراز هویت  
- `multer`: بارگذاری فایل  
- لیست کامل در `package.json`.

### توسعه
- `@nestjs/cli`, `@nestjs/testing`: ابزارهای توسعه  
- `eslint`, `prettier`: کیفیت کد  
- `jest`, `ts-jest`: تست‌نویسی  
- لیست کامل در `package.json`.

## مشارکت
لطفاً مخزن را فورک کنید، شاخه‌ای برای ویژگی جدید بسازید و درخواست pull ارسال کنید. مطمئن شوید که همه تست‌ها پاس شده و کد با استانداردهای linting/formatting سازگار است.

## مجوز
این پروژه تحت مجوز MIT منتشر شده است.